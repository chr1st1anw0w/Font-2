# 動態紋理生成工具 - UI/UX 設計規範

## 設計核心原則

### 🎯 首要目標：即時動態反饋
- **快速動態/動畫展示** 在操作者面前最重要
- **即時控制、即時展示** - 參數變更立即渲染紋理
- 最小化視覺干擾，最大化實時預覽

---

## UI 架構設計

### 📐 級別 1 - 快速訪問區（始終可見）

#### 🔍 尺度控制 (Scale)
**設計理念**：無需獨立按鈕
- ✅ 使用 **滾輪縮放** 操作（Ctrl/Cmd + 滾輪）
- ✅ 使用 **手勢縮放** 操作（觸控設備雙指捏合）
- ✅ 頂部右下角 **導航欄**（Nav Bar）顯示：
  - 當前縮放百分比 `125%`
  - 重置按鈕（1:1）
  - 適應屏幕按鈕（Fit to Screen）

```
┌─────────────────────┐
│  紋理預覽區         │
│                     │
│                     │
│         🎨          │
│                     │
│    [100%]↶  ⊡  ⟲   │  ← 右下角導航欄
└─────────────────────┘
```

**實現細節**：
- Canvas 級別操作（不佔用參數面板空間）
- 滑鼠懸停導航欄時顯示工具提示
- 雙擊重置縮放比例

---

#### 🎨 色彩控制 (Color)
**設計理念**：獨立按鈕 + 擴展面板
- ✅ 頂部工具欄中的 **專用色彩按鈕**
- ✅ 點擊後打開 **較大的詳細面板**

**面板內容結構**：
```
┌─────────────────────────────────┐
│  色彩控制面板                     │
├─────────────────────────────────┤
│ 基本色彩選擇                     │
│ [■ 主色彩]  ← 色輪選擇器        │
│ [■ 副色彩]  ← 色輪選擇器        │
│                                 │
│ 漸層設定                         │
│ ◆━━━━━━━━━━◆  線性/徑向選擇  │
│ ↻ 角度: [  30° ]                │
│                                 │
│ 物體隨機性色彩                   │
│ ☑ 啟用隨機色彩變化              │
│ 隨機度: ●───○────○ (50%)       │
│                                 │
│ 預設調色板                       │
│ [暖色系] [冷色系] [黑白] [彩虹]  │
│                                 │
│ [確認] [取消]                    │
└─────────────────────────────────┘
```

**關鍵功能**：
- **多色漸層編輯器** - 支持 2-5 色停止點
- **隨機色彩變化** - 同一紋理中物體擁有隨機色差
- **實時預覽** - 色彩面板打開時，主 Canvas 實時反映色彩變化
- **預設調色板** - 快速應用預設配色方案

---

#### 🔢 數量控制 (Quantity)
**設計理念**：獨立按鈕 + 擴展面板
- ✅ 頂部工具欄中的 **專用數量按鈕**
- ✅ 點擊後打開 **較大的詳細面板**

**面板內容結構**：
```
┌─────────────────────────────────┐
│  數量與排列控制面板               │
├─────────────────────────────────┤
│ 基本數量                         │
│ 元素數量: [12] ← 輸入框或滑桿   │
│ 排列方式: ◉ 網格 ○ 螺旋        │
│          ○ 徑向 ○ 隨機         │
│                                 │
│ 網格預設                         │
│ [3×3] [4×4] [5×5] [6×6] [自訂] │
│                                 │
│ 間距控制                         │
│ 最小間距: [10px]                │
│ 最大間距: [50px]                │
│ ☑ 自動適應屏幕寬度              │
│                                 │
│ 排列密度分析                     │
│ 每行元素數: 4                   │
│ 總佔用空間: 800×800px          │
│                                 │
│ [確認] [取消]                    │
└─────────────────────────────────┘
```

**關鍵功能**：
- **即時密度預覽** - 調整數量時，預覽區域動態更新
- **快速預設網格** - 常見排列（3×3、4×4、5×5）一鍵選擇
- **自適應間距** - 根據數量自動調整元素間距
- **視覺反饋** - 數量滑桿顯示當前配置的「擁擠程度」指示器

---

### 🌀 級別 2 - 環形詳細控制（進階選項）

#### 環形菜單結構
```
        ┌─ [高級] ─────────────┐
        │   完整參數設置        │
        │   (旋轉、尺度、      │
        │    演算法、筆寬)     │
        │                      │
   [預設]                    [匯出]
   快速方案              一鍵下載
   選擇                  (SVG/PNG/CSS)
        │                      │
        └─ [主控制中心] ─────┘
              (球心)
```

#### 子菜單詳情

**[高級] 按鈕 - 完整參數面板**
```
┌─────────────────────────────────┐
│  進階紋理參數                     │
├─────────────────────────────────┤
│
│ 旋轉控制                         │
│ 旋轉類型: ◉ 固定 ○ 遞增 ○ 隨機  │
│ 基礎角度: [30°]                 │
│ 增量: [5°]                      │
│
│ 尺度變化                         │
│ 縮放方式: ◉ 均勻 ○ Fibonacci    │
│ 基礎尺度: [1.0x]                │
│ 變化範圍: [0.5x] - [1.5x]      │
│
│ 演算法選擇                       │
│ ◉ Perlin ○ Simplex ○ Voronoi   │
│ 頻率: [0.5]                    │
│ 振幅: [0.3]                    │
│ 八度: [4]                      │
│
│ 視覺效果                         │
│ 筆畫寬度: [2px]                 │
│ 透明度: [100%]                  │
│ 混合模式: [Normal ▼]            │
│
│ [確認] [重置] [取消]             │
└─────────────────────────────────┘
```

**[預設] 按鈕 - 快速方案選擇**
```
┌─────────────────────────────────┐
│  紋理預設模板庫                   │
├─────────────────────────────────┤
│
│ 最近使用                         │
│ [萬花筒] [細胞] [波紋] [碎形]   │
│
│ 預設分類                         │
│ ▶ 幾何圖案 (5)                  │
│ ▶ 有機紋理 (3)                  │
│ ▶ 動態效果 (4)                  │
│ ▶ 高級組合 (2)                  │
│
│ 搜尋: [____________________]    │
│
│ 選中預設: 萬花筒                 │
│ 說明: 6 色對稱的萬花筒圖案       │
│                                 │
│ [應用] [編輯] [取消]             │
└─────────────────────────────────┘
```

**[匯出] 按鈕 - 多格式下載**
```
┌─────────────────────────────────┐
│  紋理匯出選項                     │
├─────────────────────────────────┤
│
│ 輸出格式                         │
│ ☑ SVG    (可縮放向量)           │
│ ☑ PNG    (光柵圖像)             │
│ ☑ CSS    (網頁就緒)             │
│
│ PNG 選項                         │
│ 解析度: [72 DPI ▼]              │
│ 尺寸: [800×800px ▼]             │
│
│ 檔案名稱: [texture-001]          │
│
│ 儲存位置: 預設下載資料夾         │
│
│ [匯出全部] [匯出選定] [取消]     │
└─────────────────────────────────┘
```

---

## 交互流程設計

### 用戶流程 A：快速調整
```
1. 用戶打開紋理生成工具
   ↓
2. 看到 Canvas 區域 + 右下角導航欄
   ↓
3. 點擊 [色彩按鈕] → 打開色彩面板
   ↓
4. 調整色彩 → 實時預覽更新
   ↓
5. 點擊 [數量按鈕] → 打開數量面板
   ↓
6. 調整數量 → 實時預覽更新
   ↓
7. 滿意後點擊 [匯出] → 選擇格式下載
```

### 用戶流程 B：進階調整
```
1. 用戶進入主界面
   ↓
2. 快速調整色彩和數量（如上）
   ↓
3. 點擊 [高級] → 打開完整參數面板
   ↓
4. 調整旋轉、尺度、演算法 → 實時預覽
   ↓
5. 保存為預設方案
   ↓
6. 複製參數 JSON（便於分享）
```

### 用戶流程 C：使用預設
```
1. 點擊 [預設] 按鈕
   ↓
2. 瀏覽預設分類或搜尋
   ↓
3. 選中一個預設
   ↓
4. 看到預覽 + 說明
   ↓
5. [應用] → 紋理立即生成
   ↓
6. 可在此基礎上進一步編輯
```

---

## 視覺設計細節

### 色彩方案
- **背景**：`#0d1117`（極深灰）
- **面板**：`#1a202c`（深灰）
- **邊框**：`#374151`（中灰）
- **主要色**：`#7c3aed`（紫色）
- **次要色**：`#5847eb`（靛藍）
- **成功**：`#10b981`（綠色）
- **警告**：`#f59e0b`（橙色）

### 動畫過渡
- **面板打開/關閉**：`cubic-bezier(0.4, 0, 0.2, 1)` 300ms
- **滑桿拖動**：`ease-out` 150ms（即時反應）
- **色彩漸層**：`ease-in-out` 200ms
- **數量變化**：動態過渡，無延遲

### 圖標使用
- 🎨 色彩 - 調色板圖標
- 🔢 數量 - 網格圖標
- ⚙️ 高級 - 齒輪圖標
- 📋 預設 - 模板圖標
- 💾 匯出 - 下載圖標
- 🔍 縮放 - 放大鏡圖標

---

## 實現優先級

### 第 1 階段（MVP）
- ✅ 色彩按鈕 + 面板（主色、副色、隨機）
- ✅ 數量按鈕 + 面板（基本網格、間距）
- ✅ 導航欄（縮放百分比、重置按鈕）
- ✅ 高級面板（旋轉、尺度、演算法）

### 第 2 階段（v1.0）
- 預設模板庫（20+ 內置方案）
- 進階預設管理（收藏、編輯、分享）
- CSS Grid 匯出優化
- 參數 JSON 導入/導出

### 第 3 階段（v2.0）
- 環形菜單 UI（軌道球心設計）
- AI 參數建議（基於描述）
- 歷史記錄 & 撤銷/重做
- 多紋理合成

---

## 關鍵績效指標 (KPI)

| 指標 | 目標 | 測量方法 |
|------|------|--------|
| **參數調整到預覽更新延遲** | < 100ms | 性能監控工具 |
| **色彩面板打開時間** | < 300ms | 動畫計時 |
| **用戶點擊數（完成一個紋理）** | < 5 次 | 用戶測試 |
| **視覺元素數量** | < 10 同時顯示 | UI 審計 |
| **預設應用成功率** | > 95% | A/B 測試 |

---

## 無障礙設計 (A11y)

- ✅ 所有控制項支持鍵盤導航（Tab、Enter、Arrow Keys）
- ✅ 色彩對比度 WCAG AA 以上
- ✅ 螢幕閱讀器支持（ARIA 標籤）
- ✅ 動畫可禁用（prefers-reduced-motion）
- ✅ 觸控設備支持（最小按鈕 44×44px）

---

## 響應式設計

### 桌面 (> 1920px)
- 左側面板寬度：400px
- 導航欄大小：120px
- 全屏預覽最佳

### 平板 (768px - 1920px)
- 左側面板寬度：320px
- 導航欄縮小為 100px
- 可選橫屏預覽

### 手機 (< 768px)
- 色彩/數量/高級 → **底部抽屜**（Drawer）
- 導航欄 → 工具欄底部
- 全屏預覽優先

---

## 開發清單

### 組件
- [ ] `ColorControlPanel.tsx` - 色彩控制面板
- [ ] `QuantityControlPanel.tsx` - 數量控制面板
- [ ] `AdvancedParametersPanel.tsx` - 進階參數面板
- [ ] `PresetLibrary.tsx` - 預設模板庫
- [ ] `ExportDialog.tsx` - 匯出對話框
- [ ] `NavigationBar.tsx` - 導航欄（縮放控制）

### 狀態管理
- [ ] 色彩參數狀態
- [ ] 數量/排列狀態
- [ ] 進階參數狀態
- [ ] 預設歷史記錄
- [ ] 匯出隊列

### 效能優化
- [ ] 參數變更防抖（300ms）
- [ ] 快取常用預設
- [ ] 虛擬化大列表（預設庫）
- [ ] WebGL 紋理渲染

---

## 參考資源

- 🎨 [Adobe Spectrum 設計系統](https://spectrum.adobe.com/)
- ⚙️ [Material Design 3 - 參數控制](https://m3.material.io/)
- 🎯 [Figma UI Kit - 參數面板](https://www.figma.com/)

---

**更新日期**：2025-11-10
**版本**：1.0
**狀態**：進行中 🚀
