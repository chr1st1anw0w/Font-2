# 動態紋理生成工具 - 完整測試計劃

**版本**: 1.0 MVP 測試
**日期**: 2025-11-10
**狀態**: 準備執行

---

## 📋 測試範圍

本文檔涵蓋以下內容的完整測試：

1. **UI 和視覺驗證** - 面板顯示、佈局、色彩
2. **交互功能測試** - 按鈕、滑桿、模態窗口
3. **參數變更測試** - 各參數的輸入和生效
4. **實時預覽測試** - Canvas 渲染和即時更新
5. **導出功能測試** - SVG、PNG、CSS 等格式導出
6. **性能測試** - 響應時間、渲染幀率

---

## 🎯 測試優先級

### 第 1 級 - 核心功能 (必須通過)
```
這些是應用能夠正常工作的基本要求
- [ ] TextureControlPanel 顯示和展開
- [ ] 快速訪問區參數控制
- [ ] 色彩模態打開和關閉
- [ ] 數量模態打開和關閉
- [ ] 生成紋理按鈕工作
- [ ] Canvas 實時預覽更新
```

### 第 2 級 - 次要功能 (應該通過)
```
這些是增強用戶體驗的功能
- [ ] 詳細設定區展開/折疊
- [ ] 所有參數滑桿反應
- [ ] 顏色選擇器工作
- [ ] HEX 輸入驗證
- [ ] 導出功能工作
- [ ] NavigationBar 縮放控制
```

### 第 3 級 - 優化功能 (可選)
```
這些是性能和用戶體驗的優化
- [ ] 防抖參數變更
- [ ] 平滑動畫過渡
- [ ] 響應式設計適配
- [ ] 鍵盤快捷鍵支持
```

---

## ✅ 第 1 級 - 核心功能測試

### Test 1.1: TextureControlPanel 顯示和展開

**步驟**:
1. 打開應用
2. 點擊 TopBar 中的 [Texture] 按鈕
3. 觀察右側邊欄是否顯示

**驗證項**:
- [ ] TextureControlPanel 右邊出現
- [ ] 寬度為 384px (w-96)
- [ ] 背景顏色為深灰色 (bg-gray-900)
- [ ] 邊框正確顯示 (border-l border-gray-800)

**預期結果**: ✅ 面板應以動畫形式從右側滑入，顯示所有控制選項

---

### Test 1.2: 快速訪問區參數控制

**步驟**:
1. TextureControlPanel 打開後，查看級別 1 快速訪問區
2. 嘗試點擊不同的形狀按鈕

**驗證項**:
```
形狀選擇 (5 個快速選項):
- [ ] 點擊 [circle] 按鈕
  └─ 形狀參數改為 'circle'
  └─ 按鈕變成選中狀態 (紫色背景)

- [ ] 點擊 [square] 按鈕
  └─ 之前的 circle 變成未選中
  └─ square 變成選中狀態

- [ ] 點擊 [triangle] 按鈕
  └─ 同上轉換

數量滑桿:
- [ ] 向左拖動滑桿
  └─ 數值減少 (左側顯示當前值)
  └─ 範圍應該是 1-100

- [ ] 向右拖動滑桿
  └─ 數值增加

- [ ] 在數值框中輸入新值
  └─ 滑桿應該移動到對應位置

排列方式:
- [ ] 點擊 [grid] 按鈕
  └─ 排列參數改為 'grid'

- [ ] 點擊 [spiral] 按鈕
  └─ 排列參數改為 'spiral'
```

**預期結果**: ✅ 所有參數應即時響應，無延遲

---

### Test 1.3: 色彩模態打開和關閉

**步驟**:
1. 快速訪問區可見時，點擊 [🎨 色彩] 按鈕
2. 觀察模態是否出現

**驗證項**:
```
模態打開:
- [ ] 背景變暗 (半透明黑色 bg-black/50)
- [ ] ColorControlPanel 模態窗口出現
- [ ] 窗口居中顯示
- [ ] 標題為 "🎨 色彩控制"

模態內容:
- [ ] 色彩模式選擇按鈕可見 (漸層、單色、隨機)
- [ ] 主色彩選擇器可見
- [ ] 副色彩選擇器可見
- [ ] 背景色選擇器可見
- [ ] 預設調色板可見 (8 個)

模態關閉:
- [ ] 點擊 [✕] 關閉按鈕
  └─ 模態消失
  └─ 背景變亮

- [ ] 點擊 [確認] 按鈕
  └─ 模態消失
```

**預期結果**: ✅ 模態應平滑出現和消失

---

### Test 1.4: 數量模態打開和關閉

**步驟**:
1. 快速訪問區可見時，點擊 [🔢 數量] 按鈕
2. 觀察模態是否出現

**驗證項**:
```
模態打開:
- [ ] 背景變暗
- [ ] QuantityControlPanel 模態窗口出現
- [ ] 標題為 "🔢 數量與排列控制"

模態內容:
- [ ] 數量滑桿可見
- [ ] 密度指示條可見
- [ ] 排列方式按鈕可見 (5 個)
- [ ] 網格預設按鈕可見 (3×3, 4×4 等)
- [ ] 網格預覽可見 (顯示實際佈局)

交互:
- [ ] 拖動數量滑桿，實時更新密度條
- [ ] 預覽網格實時更新
- [ ] 點擊排列方式按鈕可切換

模態關閉:
- [ ] 點擊 [✕] 關閉按鈕
  └─ 模態消失

- [ ] 點擊 [確認] 按鈕
  └─ 模態消失
```

**預期結果**: ✅ 模態應平滑出現和消失

---

### Test 1.5: 生成紋理按鈕工作

**步驟**:
1. TextureControlPanel 底部找到 [✨ 生成紋理] 按鈕
2. 點擊該按鈕

**驗證項**:
```
點擊時:
- [ ] 按鈕變成禁用狀態 (灰色)
- [ ] 顯示 loading spinner (旋轉圖標)
- [ ] 顯示文本 "生成中..."

生成過程中:
- [ ] Canvas 區域顯示加載狀態
- [ ] 約 0.5-1 秒後完成

生成完成:
- [ ] Canvas 顯示生成的紋理
- [ ] 按鈕恢復正常狀態
- [ ] TextureToolbar 出現 (左下角)
- [ ] NavigationBar 出現 (右下角)
```

**預期結果**: ✅ 紋理應完整渲染到 Canvas

---

### Test 1.6: Canvas 實時預覽更新

**步驟**:
1. 打開 TextureControlPanel
2. 生成一個初始紋理
3. 修改任何參數，觀察預覽是否更新

**驗證項**:
```
修改形狀:
- [ ] 點擊不同形狀後，按 [生成紋理]
  └─ Canvas 顯示新形狀

修改數量:
- [ ] 調整數量滑桿，按 [生成紋理]
  └─ Canvas 顯示不同數量的元素

修改色彩:
- [ ] 打開色彩模態，選擇新色彩，確認
- [ ] 按 [生成紋理]
  └─ Canvas 顯示新色彩

修改排列:
- [ ] 打開數量模態，選擇不同排列，確認
- [ ] 按 [生成紋理]
  └─ Canvas 顯示新排列方式
```

**預期結果**: ✅ 所有參數變更都應反映在視覺預覽中

---

## ✅ 第 2 級 - 次要功能測試

### Test 2.1: 詳細設定區展開/折疊

**步驟**:
1. TextureControlPanel 中向下滾動
2. 找到「旋轉與尺度」區塊
3. 點擊標題欄

**驗證項**:
```
未展開狀態:
- [ ] 只顯示標題
- [ ] 右側有下拉箭頭 ▼

點擊展開:
- [ ] 區域展開，顯示內容
- [ ] 箭頭變成 ▲
- [ ] 動畫平滑過渡 (~200ms)

展開後的內容:
- [ ] 旋轉角度滑桿
- [ ] 尺度滑桿

點擊折疊:
- [ ] 區域折疊
- [ ] 內容隱藏
- [ ] 箭頭變回 ▼
```

**預期結果**: ✅ 所有區域都應能獨立展開/折疊

---

### Test 2.2: 所有參數滑桿反應

**步驟**:
在詳細設定區，找到並測試每個滑桿

**驗證項**:
```
旋轉角度滑桿:
- [ ] 拖動時，右側實時顯示數值 (0-360°)
- [ ] 範圍正確

尺度滑桿:
- [ ] 拖動時，右側實時顯示數值 (0.1-5.0)
- [ ] 範圍正確

筆畫寬度:
- [ ] 可以調整 (1-50px)

密度:
- [ ] 可以調整 (0-100%)

透明度:
- [ ] 可以調整 (0-100%)

頻率:
- [ ] 可以調整 (0.1-2.0)

振幅:
- [ ] 可以調整 (0-1.0)
```

**預期結果**: ✅ 所有滑桿應流暢響應，無延遲

---

### Test 2.3: 顏色選擇器工作

**步驟**:
1. 打開色彩模態 [🎨 色彩]
2. 測試色盤選擇器

**驗證項**:
```
色盤點擊:
- [ ] 點擊色盤，選擇新色彩
- [ ] HEX 輸入框自動更新
- [ ] 預覽顯示新色彩

HEX 輸入:
- [ ] 在 HEX 輸入框中輸入 #ff0000
  └─ 色盤更新
  └─ 預覽更新

驗證格式:
- [ ] 輸入無效 HEX (如 #xyz) 不更新
- [ ] 自動轉換為大寫
```

**預期結果**: ✅ 色彩選擇應雙向同步

---

### Test 2.4: HEX 輸入驗證

**步驟**:
在色彩模態中測試 HEX 輸入框

**驗證項**:
```
有效輸入:
- [ ] #7c3aed (6 位) ✅
- [ ] #fff (3 位) ✅
- [ ] #FFFFFF (大寫) ✅

無效輸入:
- [ ] #xyz (無效字符) ❌
- [ ] 7c3aed (缺少 #) ❌
- [ ] #7c3aed00 (8 位，RGBA) ❌

錯誤處理:
- [ ] 輸入無效值後，不應更新參數
- [ ] 應保持前一個有效色彩
```

**預期結果**: ✅ 應對無效輸入有適當處理

---

### Test 2.5: 導出功能工作

**步驟**:
1. 生成一個紋理
2. 找到 TextureToolbar (左下角)
3. 點擊導出按鈕

**驗證項**:
```
導出菜單:
- [ ] TextureToolbar 出現
- [ ] 顯示紋理 ID 和元素數

SVG 導出:
- [ ] 點擊 [SVG]
- [ ] 文件下載成功
- [ ] 文件名為 texture-xxx.svg

PNG 導出:
- [ ] 點擊 [PNG]
- [ ] 文件下載成功
- [ ] 文件名為 texture-xxx.png
- [ ] 圖像可用圖片查看器打開

CSS 導出:
- [ ] 點擊 [CSS]
- [ ] 文件下載成功
- [ ] 文件名為 texture-xxx.css
```

**預期結果**: ✅ 至少 SVG 導出應能正常工作

---

### Test 2.6: NavigationBar 縮放控制

**步驟**:
1. 生成紋理後，找到 NavigationBar (右下角)
2. 測試縮放控制

**驗證項**:
```
縮放按鈕:
- [ ] [−] 按鈕減少 10%
- [ ] [+] 按鈕增加 10%
- [ ] 百分比顯示正確

預設菜單:
- [ ] 點擊百分比顯示打開菜單
- [ ] 菜單顯示所有預設 (25%, 50%, 75%, 100%, ...)
- [ ] 當前縮放被標記

預設選擇:
- [ ] 點擊 [150%]
  └─ 縮放應用
  └─ Canvas 放大
  └─ 菜單關閉

重置按鈕:
- [ ] [1:1] 按鈕重置為 100%

適應屏幕:
- [ ] [⊡] 按鈕設置為 75%
```

**預期結果**: ✅ 縮放應流暢工作，預覽應即時更新

---

## 📊 第 3 級 - 優化功能測試

### Test 3.1: 防抖參數變更

**步驟**:
1. 打開開發者工具 (F12)
2. 進入 Console
3. 快速拖動數量滑桿

**驗證項**:
```
沒有防抖:
- [ ] 每次滑桿移動都會重新計算紋理 (不理想)

有防抖:
- [ ] 滑桿拖動時，預覽不更新
- [ ] 釋放滑桿後，預覽更新一次
- [ ] 整體性能更好
```

**預期結果**: ✅ 應該看到防抖效果（拖動時預覽不卡頓）

---

### Test 3.2: 平滑動畫過渡

**步驟**:
1. 打開和關閉色彩模態
2. 展開和折疊詳細區域
3. 調整縮放級別

**驗證項**:
```
模態動畫:
- [ ] 打開時有淡入動畫
- [ ] 關閉時有淡出動畫
- [ ] 時長約 200-300ms

區域展開:
- [ ] 展開時有平滑展開動畫
- [ ] 折疊時有平滑折疊動畫

縮放過渡:
- [ ] Canvas 縮放時有過渡效果
- [ ] 不會生硬跳躍
```

**預期結果**: ✅ 所有動畫應平滑自然

---

### Test 3.3: 響應式設計適配

**步驟**:
1. 在不同屏幕尺寸測試應用
2. 使用 Chrome 開發者工具的設備模擬

**驗證項**:
```
桌面 (1920px+):
- [ ] TextureControlPanel 正常寬度 (w-96)
- [ ] Canvas 足夠大

平板 (1024px):
- [ ] TextureControlPanel 縮小 (w-80)
- [ ] Canvas 自適應
- [ ] 所有按鈕可點擊

手機 (375px):
- [ ] TextureControlPanel 應轉為抽屜或隱藏
- [ ] Canvas 全屏
- [ ] 按鈕仍可操作
```

**預期結果**: ⚠️ 手機適配可能需要額外工作

---

### Test 3.4: 鍵盤快捷鍵支持

**步驟**:
測試預期的鍵盤快捷鍵

**驗證項**:
```
縮放:
- [ ] Ctrl + Mouse Wheel Up → 放大
- [ ] Ctrl + Mouse Wheel Down → 縮小
- [ ] Ctrl + 0 → 重置 100%

對話框:
- [ ] Esc → 關閉任何打開的模態
```

**預期結果**: ⚠️ 可能需要實現

---

## 🐛 故障排除清單

### 如果 TextureControlPanel 不顯示

```
1. 檢查 TopBar 中的 [Texture] 按鈕是否可見
2. 點擊按鈕是否觸發 toggleTexturePanel()
3. 檢查 showTexturePanel 狀態是否為 true
4. 查看瀏覽器控制台是否有錯誤
```

### 如果模態窗口不出現

```
1. 檢查 showColorPanel / showQuantityPanel 狀態
2. 確認快速訪問區的按鈕 onClick 正確綁定
3. 檢查 ColorControlPanel 和 QuantityControlPanel 的 isOpen props
4. 查看瀏覽器控制台是否有錯誤
```

### 如果參數改了但預覽沒變

```
1. 檢查是否點擊了 [生成紋理] 按鈕
2. 確認 handleGenerateTexture() 被調用
3. 檢查 Canvas 是否接收新的 textureParameters props
4. 查看 Console 中是否有錯誤日誌
```

### 如果顏色選擇器不工作

```
1. 檢查 ColorControlPanel 是否正確渲染
2. 確認色盤 <input type="color"> 元素存在
3. 檢查 onPrimaryColorChange 回調是否綁定
4. 驗證 HEX 輸入框是否連接到狀態
```

---

## 📝 測試報告模板

使用此模板記錄測試結果:

```markdown
## 測試日期: 2025-11-10
## 測試者: [您的名字]
## 環境: Chrome/Firefox + Windows/Mac/Linux

### 核心功能 (第 1 級)
- [ ] Test 1.1: TextureControlPanel 顯示 ✅/❌/⚠️
  備註:

- [ ] Test 1.2: 快速訪問區控制 ✅/❌/⚠️
  備註:

... (依此類推)

### 總體狀態
- 通過: X/6
- 失敗: X/6
- 需要改進: X/6

### 發現的問題
1. 問題描述
   └─ 重現步驟
   └─ 預期 vs 實際
   └─ 優先級: 高/中/低

2. ...

### 建議改進
1. ...
2. ...
```

---

## 🎯 測試完成標準

### ✅ MVP 可發布標準 (必須通過)

```
- [ ] 所有第 1 級測試通過
- [ ] TextureControlPanel 正常顯示
- [ ] 至少一個參數可以控制
- [ ] 生成紋理功能工作
- [ ] Canvas 預覽更新正確
- [ ] 沒有致命錯誤或崩潰
```

### ⭐ 生產級標準 (應該通過)

```
- [ ] 所有第 1 級和第 2 級測試通過
- [ ] 所有參數都可正常控制
- [ ] 所有導出格式都工作
- [ ] 性能滿足要求 (無明顯卡頓)
- [ ] 錯誤處理正確
```

### 🚀 優化標準 (可選)

```
- [ ] 所有第 3 級測試通過
- [ ] 響應式設計完整
- [ ] 鍵盤快捷鍵支持
- [ ] 動畫流暢自然
```

---

## 🔗 相關文檔

- **CONTROL_PANELS_FRAMEWORK.md** - UI 框架詳解
- **CONTROL_PANELS_QUICK_REFERENCE.md** - 參數快速查閱
- **PANELS_INTERACTION_DIAGRAM.md** - 交互流程說明
- **INTEGRATION_SUMMARY.md** - 項目集成報告

---

**版本**: 1.0
**最後更新**: 2025-11-10
**狀態**: 準備執行測試

